---
# General values
#
# Set cluster names ... Unfortunately the openshift-gitops operator keeps
# removing the secret of the *mgmtclustername (local cluster),
# therefor we switch ti list generator
# https://issues.redhat.com/browse/GITOPS-1777
mgmt-cluster: &mgmtcluster https://kubernetes.default.svc
mgmt-cluster-name: &mgmtclustername in-cluster
production-cluster: &prodcluster https://api.cluster-qf5g6.qf5g6.sandbox389.opentlc.com:6443
production-cluster-name: &prodclustername prod

repourl: &repourl 'https://github.com/tjungbauer/openshift-cluster-bootstrap'
repobranch: &branch main

application_gitops_namespace: gitops-application

applicationsets:
  application_1:
    enabled: true
    path: tenants/project_onboarding/application_1
    per_cluster_helm_values: true
    generatorclusters: []
#    repourl: "" # Optional
#    targetrevision: "" # Optional

    group_dev:
      enabled: true
      # name: application-1-dev  # Optional, will be build using the key and "-dev" as postfix
      users:
        - mona

    group_ops:
      enabled: true
      users:
        - user1

    argocd_project_setup:
      enabled: true
      destinations:
        - name: *prodclustername
          #namespace: application-1  # taking the key later in the chart template
          server: *prodcluster
        - name: *mgmtclustername
          #namespace: application-1  # taking the key later in the chart template
          server: *mgmtcluster
      sourceRepos:
        - 'https://github.com/tjungbauer/openshift-cluster-bootstrap'
      rbac:
        - name: default-role
          groups:
           - application-1-dev
          policies:
            - 'p, proj:application-1:default-role, applications, get, application-1/*, allow'
            - 'p, proj:application-1:default-role, applications, create, application-1/*, allow'
            - 'p, proj:application-1:default-role, applications, update, application-1/*, allow'
            - 'p, proj:application-1:default-role, applications, delete, application-1/*, allow'
            - 'p, proj:application-1:default-role, applications, sync, application-1/*, allow'
            - 'p, proj:application-1:default-role, applications, override, application-1/*, allow'

# These define the default values. 
# It is possible to overwrite repourl and targetrevision in the Applications(Sets)
general:
  argocd_project: 'default'
  source:
    repourl: *repourl
  branch: *branch
